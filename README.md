# NextNum

NextNum 是一个用于生成唯一标识符的 Go 语言库。它提供了多种生成方式,包括基于 Redis 的实现、无 Redis 的内存实现,以及基于雪花算法的实现。

## 雪花算法实现

雪花算法(Snowflake)是一种用于生成分布式系统中唯一ID的算法。我们的实现具有以下特点:

1. 使用64位整数表示ID。
2. 前41位是时间戳(毫秒级),提供约69年的时间范围。
3. 接下来10位是节点ID,最多支持1024个节点。
4. 最后12位是序列号,每毫秒最多生成4096个ID。
5. 使用2023年1月1日作为纪元(epoch)起始时间。

这个实现可以保证在分布式系统中生成唯一的ID,只要确保每个节点使用不同的节点ID。它也提供了很好的时间排序特性,因为ID的前41位是时间戳。
要运行这个示例,您需要更新项目的 go.mod 文件,添加新的包路径。然后您就可以运行 go run snowflake/example/main.go 来测试这个雪花算法生成器。

添加时间戳检查防止日间戳一致生成冲突的 ID
1. 分布式唯一性：
* 这个实现在分布式环境下可以保证唯一性，前提是每个节点使用不同的 node 值。
* 时间戳（41位）+ 节点ID（10位）+ 序列号（12位）的组合确保了在不同节点上生成的ID是唯一的。
2. 重启影响：
* 重启本身不会直接影响ID的唯一性，因为时间戳是ID的主要组成部分。
* 但是，如果在同一毫秒内重启并立即生成新ID，可能会出现重复ID的风险。
为了进一步增强唯一性保证，特别是在重启场景下，我们可以做以下改进：
1. 添加最后时间戳检查
2. 使用系统时钟单调性检查

### 使用方法
